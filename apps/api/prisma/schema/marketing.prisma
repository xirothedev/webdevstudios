// =========================================
// MARKETING & SOCIAL
// =========================================

model Voucher {
  id    String       @id @default(cuid())
  code  String       @unique @db.VarChar(20)
  type  DiscountType
  value Decimal      @db.Money // Giá trị giảm (số tiền hoặc %)

  minSpend    Decimal? @db.Money // Đơn tối thiểu
  maxDiscount Decimal? @db.Money // Giảm tối đa (cho loại %)

  usageLimit Int @default(100) // Tổng số lần dùng
  usedCount  Int @default(0) // Đã dùng

  startDate DateTime
  endDate   DateTime
  isActive  Boolean  @default(true)

  @@map("vouchers")
}

model Review {
  id      String  @id @default(cuid())
  rating  Int     @default(5) // 1-5 sao
  comment String? @db.Text

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  productId String
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([productId])
  @@index([userId])
  @@map("reviews")
}
